# make_latex_model 技能测试计划 - NSFC_General

**测试实例**: v202601052133
**测试日期**: 2026-01-05
**测试目标**: 验证 `make_latex_model` 技能对 NSFC_General 项目模板的处理能力

---

## 1. 测试概述

### 1.1 测试目的

全面测试 `make_latex_model` 技能对 **NSFC_General（面上项目模板）** 的支持情况：

1. **项目理解能力**: 深度阅读并分析 NSFC_General 的 LaTeX 配置
2. **差异识别能力**: 对比 NSFC_General 与 NSFC_Young 的配置差异
3. **跨项目通用性**: 验证技能是否适用于不同类型的 NSFC 项目
4. **样式一致性**: 确保 NSFC_General 与 Word 2026 模板对齐

### 1.2 测试范围

- **测试项目**: NSFC_General (面上项目模板)
- **对比项目**: NSFC_Young (青年科学基金项目模板)
- **Word 模板**: 2026年最新 Word 模板（面上项目）
- **关键文件**:
  - `extraTex/@config.tex` (样式配置文件)
  - `main.tex` (主文档)
  - `fonts/` (字体文件)
  - `figures/` (图片资源)

### 1.3 NSFC_General vs NSFC_Young 预期差异

| 配置项 | NSFC_Young | NSFC_General | 说明 |
|--------|------------|--------------|------|
| 页边距 | left=3.20cm | left=3.00cm | 面上项目边距可能不同 |
| 右边距 | right=3.14cm | right=3.07cm | 面上项目右边距 |
| 行距 | 1.5 倍 | 1.5 倍 | 应保持一致 |
| 字号系统 | 四号 14pt | 四号 14pt | 应保持一致 |
| 标题格式 | 四级标题 | 四级标题 | 应保持一致 |

---

## 2. 测试环境

### 2.1 目录结构

```
skills/make_latex_model/tests/v202601052133/
├── baseline/              # Word 打印的 PDF 基准
│   └── word.pdf          # Word 导出的 PDF
├── artifacts/            # 测试生成的产物
│   ├── latex.pdf        # LaTeX 生成的 PDF
│   ├── word.png         # Word PDF 转换的 PNG
│   └── latex.png        # LaTeX PDF 转换的 PNG
├── test_project/         # 复制的测试项目
│   ├── main.tex
│   ├── extraTex/
│   │   ├── @config.tex
│   │   ├── 1.*.tex      # 第一章节
│   │   ├── 2.*.tex      # 第二章节
│   │   └── 3.*.tex      # 第三章节
│   ├── fonts/
│   ├── figures/
│   ├── references/
│   └── bibtex-style/
├── reports/              # 测试报告
├── TEST_PLAN.md          # 本文件
└── TEST_REPORT.md        # 测试报告
```

---

## 3. 测试用例

### 3.1 项目对比分析测试

**目标**: 对比 NSFC_General 与 NSFC_Young 的配置差异

**步骤**:
1. 读取 `NSFC_General/extraTex/@config.tex`
2. 读取 `NSFC_Young/extraTex/@config.tex`
3. 逐项对比关键配置参数
4. 记录差异点

**预期结果**:
- ✅ 准确识别两个项目的配置差异
- ✅ 分析差异的合理性
- ✅ 确定是否需要调整 NSFC_General 的配置

**验收标准**:
- [ ] 差异列表完整
- [ ] 每个差异点都有合理的解释
- [ ] 样式参数符合 Word 2026 模板

---

### 3.2 编译兼容性测试

**目标**: 验证 NSFC_General 项目可以正常编译

**步骤**:
1. 进入 `test_project/` 目录
2. 运行 XeLaTeX 编译
3. 检查编译输出

**预期结果**:
- ✅ 编译成功，生成 `main.pdf`
- ✅ 无致命错误
- ✅ 字体加载正常

**验收标准**:
- [ ] PDF 文件成功生成
- [ ] 编译日志中无 `Error` 级别信息
- [ ] 文件大小合理（> 10 KB）

---

### 3.3 样式参数验证测试

**目标**: 验证 NSFC_General 的样式参数是否正确

**步骤**:
1. 读取 `test_project/extraTex/@config.tex`
2. 提取关键样式参数
3. 与 Word 2026 模板标准对比

**关键参数**:
- 页面设置 (geometry)
- 颜色定义 (MsBlue RGB 值)
- 字号系统
- 标题格式 (titlesec)
- 列表样式 (enumitem)
- 行距设置

**验收标准**:
- [ ] 所有样式参数在容忍度范围内
- [ ] 与 Word 模板一致（误差 < 配置的容忍度）

---

### 3.4 跨项目通用性测试

**目标**: 验证 `make_latex_model` 技能是否适用于 NSFC_General

**测试场景**:
1. **项目识别**: 技能能正确识别 `project=NSFC_General`
2. **路径解析**: 技能能正确解析 NSFC_General 的文件路径
3. **样式修改**: 技能能正确修改 NSFC_General 的 `@config.tex`
4. **编译验证**: 修改后的项目能正常编译

**验收标准**:
- [ ] 技能支持 `project=NSFC_General` 参数
- [ ] 修改后的 `@config.tex` 符合预期
- [ ] 编译无错误
- [ ] 样式符合 Word 模板

---

### 3.5 验证脚本适配性测试

**目标**: 验证 `validate.sh` 和 `benchmark.sh` 是否适用于 NSFC_General

**步骤**:
1. 修改 `validate.sh` 中的项目路径
2. 运行验证脚本
3. 分析报告输出

**预期结果**:
- ✅ 验证脚本成功执行
- ✅ 自动检测编译状态
- ✅ 样式参数检查完成
- ✅ 性能基准数据生成

**验收标准**:
- [ ] 脚本无错误退出
- [ ] 验证报告完整
- [ ] 性能数据合理

---

## 4. 测试执行计划

### 4.1 测试阶段

| 阶段 | 测试用例 | 预计时间 | 依赖 |
|------|----------|----------|------|
| 阶段 1 | 环境准备 | 5 分钟 | - |
| 阶段 2 | 项目对比分析 | 10 分钟 | 阶段 1 |
| 阶段 3 | 编译兼容性测试 | 3 分钟 | 阶段 1 |
| 阶段 4 | 样式参数验证 | 5 分钟 | 阶段 2, 3 |
| 阶段 5 | 跨项目通用性测试 | 8 分钟 | 阶段 4 |
| 阶段 6 | 验证脚本测试 | 3 分钟 | 阶段 5 |
| 阶段 7 | 报告生成 | 5 分钟 | 阶段 6 |
| **总计** | - | **39 分钟** | - |

---

## 5. 测试数据与基准

### 5.1 NSFC_General 预期配置（基于 @config.tex 分析）

**页面设置**:
- 上边距: 2.50 cm
- 下边距: 2.50 cm
- 左边距: 3.00 cm
- 右边距: 3.07 cm

**颜色**:
- MsBlue: RGB 0, 112, 192

**字体**:
- 中文: KaiTi (楷体)
- 英文: Times New Roman

**字号** (pt):
- 四号 (sihao): 14 pt
- 小四 (xiaosihao): 12 pt

**行距**:
- 基准行距: 1.5 倍

---

## 6. 成功标准

### 6.1 必须满足（第一优先级）

- ✅ 所有测试用例执行完成
- ✅ 编译无错误和严重警告
- ✅ 修改后的 LaTeX 文档可正常使用

### 6.2 应该满足（第二优先级）

- ✅ 样式参数与 Word 基准一致
- ✅ 验证脚本正常运行
- ✅ 测试报告完整

### 6.3 期望满足（第三优先级）

- ✅ 技能支持 NSFC_General 项目
- ✅ 跨项目通用性验证通过
- ✅ 性能基准合理

---

## 7. 风险与对策

### 7.1 潜在风险

| 风险 | 影响 | 概率 | 对策 |
|------|------|------|------|
| NSFC_General 配置与 NSFC_Young 差异过大 | 高 | 中 | 记录差异，更新技能文档 |
| 字体文件缺失 | 高 | 低 | 测试前检查字体目录 |
| 编译错误 | 高 | 中 | 保留原始配置备份 |
| 验证脚本不兼容 | 中 | 中 | 修改脚本以支持多项目 |

---

## 8. 附录

### 8.1 参考资料

- [SKILL.md](../SKILL.md) - 技能完整文档
- [config.yaml](../config.yaml) - 技能配置文件
- [NSFC 面上项目模板](../../../projects/NSFC_General/)
- [NSFC 青年基金模板](../../../projects/NSFC_Young/)

### 8.2 测试日志

测试过程中的详细日志将保存在 `reports/test.log`

---

**测试计划版本**: 1.0
**最后更新**: 2026-01-05
