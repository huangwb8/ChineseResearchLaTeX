# nsfc-length-aligner 配置文件（Single Source of Truth）
#
# 说明：
# - 本 skill 以“篇幅预算（budget）”为核心：先量化，再对齐。
# - 默认预算为“示例标准”，务必按当年指南/模板要求人工校对后再使用。

skill_info:
  name: "nsfc-length-aligner"
  version: "0.3.0"
  description: "国自然标书篇幅对齐：内置（可配置）2026版30页改革的推荐篇幅口径（页数为硬约束，字符预算为可复检代理指标），自动检查目标标书篇幅并生成差距报告，指导在尽量不改变原意的前提下扩写/压缩到达标。"
  author: "Bensz Conan"
  category: "normal"

directories:
  plans: "plans"
  tests: "tests"

# ============================================================================
# 篇幅标准（示例）
# ============================================================================
#
# unit:
# - cjk_chars: 主要面向中文正文（更稳定）
# - chars: 去空白后的字符数（中英文混合时可用）
#
# budgets.files: 通过 glob 匹配文件路径（相对 input 目录或文件的路径）
# - match: glob（使用 Python fnmatch 规则）
# - min/max: 允许区间（闭区间）；可只填 target，脚本会用 +/- tolerance_ratio 生成区间
#
length_standard:
  unit: "cjk_chars"
  tolerance_ratio: 0.08
  pages:
    # 2026 改版：正文原则上不超过 30 页；实操建议控制在 28 页以内留缓冲。
    # 说明：页数受模板/字体/行距/图表影响很大；不要通过缩小字体/行距“挤页数”。
    max: 28
    hard_max: 30
    notes: "页数为硬约束：建议 ≤28 页留缓冲；原则上不超过 30 页。"
  overall:
    # 2026 调研口径（面上/青基 C 类）：
    # - 合计约 25000–31000 字（建议与页数联动校对：总页数≤28）
    # 注意：这里的“字”是写作口径；脚本的 cjk_chars 只统计中日韩统一表意文字，英文/数字/标点会被低估。
    min: 25000
    max: 31000
    notes: "2026 调研示例：合计约 25000–31000 字；建议总页数≤28 留缓冲。请按当年指南/模板校对。"
  files:
    - name: "立项依据"
      match: "*立项依据*.tex"
      min: 8000
      max: 10000
      notes: "6–10 页（约 8000–10000 字）：穿透式，不铺陈；聚焦 Gap/Key Idea/价值论证。"
    - name: "研究内容"
      match: "*研究内容*.tex"
      min: 12000
      max: 15000
      notes: "12–15 页（约 12000–15000 字）：绝对核心；逻辑框架 + 关键设计 + 图表表达；应提炼创新点与年度计划（如把创新/计划拆到独立文件，请从本预算中等额扣除，保持总量不变）。"
    - name: "研究基础"
      match: "*研究基础*.tex"
      min: 5000
      max: 6000
      notes: "5–8 页（约 5000–6000 字）：证据链证明可行性；强相关预实验数据 + 核心技术能力 + 平台条件。"
    - name: "特色与创新（通常并入研究内容）"
      match: "*创新*.tex"
      min: 800
      max: 1500
      notes: "2026 新版通常并入“研究内容”撰写；如单独成文件，控制在 0.5–1.5 页，聚焦 1–2 条高含金量创新，避免绝对化措辞。"
    - name: "年度研究计划（通常并入研究内容）"
      match: "*研究计划*.tex"
      min: 800
      max: 1500
      notes: "2026 新版通常并入“研究内容”撰写；如单独成文件，控制在 0.5–1.5 页，按整年写三年计划；里程碑与可交付成果对齐。"

# ============================================================================
# 检查器行为
# ============================================================================
checker:
  include_globs:
    # 默认只统计会进入 PDF 的 LaTeX 源文件；如你在同目录还放了 README/笔记等 Markdown，
    # 避免误计入篇幅。若确实需要统计 Markdown，可自行加入 "*.md" / "*.markdown"。
    - "*.tex"
  exclude_globs:
    - "**/tests/**"
    - "**/plans/**"
    - "**/_artifacts/**"
    - "**/.git/**"
  latex:
    # 当输入是一个标书目录且能识别出 main.tex 时：
    # - 自动沿着 \input/\include 的依赖树收集“实际会被编译进 PDF 的文件”
    # - 忽略被注释掉的 \input（避免把可选章节误计入篇幅）
    # 值：auto/true/false
    follow_inputs: "auto"
    split_sections: true
    section_commands:
      - "section"
      - "subsection"
      - "subsubsection"
    # 如你的模板用自定义命令（例如 \sec{...}），可把它加入列表（只写命令名，不含反斜杠）。
    # 估算“可见文本”的启发式规则：会忽略常见 LaTeX 命令/数学环境/注释
    strip_math: true
    strip_commands: true
