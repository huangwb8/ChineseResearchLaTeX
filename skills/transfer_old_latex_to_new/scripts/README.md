# Scripts ç›®å½•

æœ¬ç›®å½•åŒ…å« `transfer_old_latex_to_new` æŠ€èƒ½çš„å¯æ‰§è¡Œè„šæœ¬ã€‚

## è„šæœ¬åˆ—è¡¨

### `run.py` - ä¸»æ‰§è¡Œå…¥å£

å®Œæ•´çš„ MVP é—­ç¯è„šæœ¬,æ”¯æŒå››ä¸ªæ ¸å¿ƒå‘½ä»¤:

```bash
# åˆ†æç»“æ„å·®å¼‚å¹¶ç”Ÿæˆè¿ç§»è®¡åˆ’
python scripts/run.py analyze --old <æ—§é¡¹ç›®> --new <æ–°é¡¹ç›®>

# æ‰§è¡Œè¿ç§»(å†™å…¥æ–°é¡¹ç›®)
python scripts/run.py apply --run-id <run_id> --old <æ—§é¡¹ç›®> --new <æ–°é¡¹ç›®>

# ç¼–è¯‘éªŒè¯
python scripts/run.py compile --run-id <run_id> --new <æ–°é¡¹ç›®>

# å›æ»šæ¢å¤
python scripts/run.py restore --run-id <run_id> --new <æ–°é¡¹ç›®>
```

**è¯¦ç»†æ–‡æ¡£**: è§ [../SKILL.md](../SKILL.md)

---

### `migrate.sh` - ä¸€é”®è¿ç§»è„šæœ¬

å¯¹ `run.py` çš„ç®€å•å°è£…ï¼š`analyze â†’ apply â†’ (å¯é€‰) compile`ã€‚

```bash
# æœ€å°ç”¨æ³•ï¼šä¸€é”®è¿ç§»
bash scripts/migrate.sh --old <æ—§é¡¹ç›®> --new <æ–°é¡¹ç›®>

# å°† runs è¾“å‡ºéš”ç¦»åˆ°æŒ‡å®šç›®å½•ï¼ˆå»ºè®®ï¼šæµ‹è¯•/CI ä½¿ç”¨ï¼‰
bash scripts/migrate.sh --old <æ—§é¡¹ç›®> --new <æ–°é¡¹ç›®> --runs-root /path/to/runs
```

**é€‚ç”¨åœºæ™¯**:
- ä¸æƒ³æ‰‹åŠ¨å¤åˆ¶ç²˜è´´ run_id
- éœ€è¦â€œä¸€æ¡å‘½ä»¤è·‘å®Œæ•´æµç¨‹â€
- å¸Œæœ›æŠŠ runs è¾“å‡ºæ”¾åˆ°æŒ‡å®šç›®å½•ï¼ˆä¿æŒé¡¹ç›®å¹²å‡€ï¼‰

---

### `demo.py` - æ ¸å¿ƒåŠŸèƒ½æ¼”ç¤º

æ¼”ç¤ºä¸‰å¤§æ ¸å¿ƒåŠŸèƒ½çš„ç‹¬ç«‹è„šæœ¬:

1. **å­—æ•°è‡ªåŠ¨é€‚é…** - `WordCountAdapter`
2. **å¼•ç”¨å¼ºåˆ¶ä¿æŠ¤** - `ReferenceGuardian`
3. **AI å†…å®¹æ™ºèƒ½ä¼˜åŒ–** - `ContentOptimizer`

```bash
# è¿è¡Œæ¼”ç¤º
python scripts/demo.py
```

**è¾“å‡ºç¤ºä¾‹**:
```
ğŸš€ LaTeX æ ‡ä¹¦æ™ºèƒ½è¿ç§»æŠ€èƒ½ - æ ¸å¿ƒåŠŸèƒ½æ¼”ç¤º
ğŸ“Š æ¼”ç¤ºï¼šå­—æ•°è‡ªåŠ¨é€‚é…
   å½“å‰å­—æ•°: 1800
   æ—§ç‰ˆæœ¬è¦æ±‚: 2000 å­—
   æ–°ç‰ˆæœ¬è¦æ±‚: 1500 å­—
   æ˜¯å¦éœ€è¦é€‚é…: æ˜¯
...
```

**é€‚ç”¨åœºæ™¯**:
- æ–°åŠŸèƒ½å¿«é€ŸéªŒè¯
- å‘ç”¨æˆ·å±•ç¤ºåŠŸèƒ½ç‰¹æ€§
- å¼€å‘è°ƒè¯•

---

### `quicktest.py` - å¿«é€Ÿæµ‹è¯•å·¥å…·

ç®€å•çš„å•å…ƒæµ‹è¯•è¿è¡Œå™¨,ä¸ä¾èµ– pytest ç¯å¢ƒ:

```bash
# è¿è¡Œå¿«é€Ÿæµ‹è¯•
python scripts/quicktest.py
```

**æµ‹è¯•è¦†ç›–**:
- WordCountAdapter å­—æ•°ç»Ÿè®¡ä¸æŠ¥å‘Š
- ReferenceGuardian å¼•ç”¨ä¿æŠ¤ä¸æ¢å¤
- ContentOptimizer å†…å®¹åˆ†æä¸ä¼˜åŒ–
- AIIntegration å¼‚æ­¥é›†æˆ

**é€‚ç”¨åœºæ™¯**:
- å¿«é€ŸéªŒè¯æ¨¡å—å¯ç”¨æ€§
- æ—  pytest ç¯å¢ƒæ—¶çš„åŸºç¡€æµ‹è¯•
- CI/CD è½»é‡çº§æ£€æŸ¥

**æ³¨æ„**: å®Œæ•´çš„æµ‹è¯•å¥—ä»¶åœ¨ [../tests/](../tests/) ç›®å½•,ä½¿ç”¨ pytest è¿è¡Œ:
```bash
pytest tests/
```

---

## ä½¿ç”¨å»ºè®®

| åœºæ™¯ | æ¨èè„šæœ¬ |
|------|---------|
| **ç”Ÿäº§ä½¿ç”¨** | `run.py` |
| **åŠŸèƒ½æ¼”ç¤º** | `demo.py` |
| **å¿«é€ŸéªŒè¯** | `quicktest.py` |
| **å®Œæ•´æµ‹è¯•** | `pytest tests/` |

---

**æœ€åæ›´æ–°**: 2026-01-08
