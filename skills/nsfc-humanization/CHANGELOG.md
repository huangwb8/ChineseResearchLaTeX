# Changelog — nsfc-humanization

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.1.0/)。

## [0.4.0] - 2026-02-24

### Added（新增）

- 新增可选控制参数：`section_type`（章节类型）/ `field`（领域）/ `strength`（强度）/ `output_mode`（输出模式）/ `self_eval_rounds`（自评轮数上限）
- 新增 `output_mode=diagnosis_only`：仅输出机器味诊断报告（模式 + 严重程度 + 建议设置）
- 新增 `output_mode=text_with_change_summary*`：支持输出“变更摘要”（用于快速核查语义保留）
- 新增 STYLE_CARD（风格卡）：为跨段落一致性提供可复用的“风格约束”，支持用户在后续批次粘贴回传

### Changed（变更）

- 更新 `SKILL.md`：补齐 D2/D3/D4/D5/D7 的可操作机制（领域/章节感知、强度参数化、变更摘要、STYLE_CARD 一致性）
- 更新 `references/machine-patterns.md`：新增 `field` 的领域表达偏好提示，支持“模式库 + 领域框架”联动
- 更新 `config.yaml` / `README.md`：版本号更新至 0.4.0（单一真相来源）

## [0.2.0] - 2026-02-24

### Added（新增）

- 执行流程新增“风格自评（最多 1 轮回修）”：在语义自检后复核机器味残留，并在不触碰硬性约束前提下进行第二轮最小修正
- 更新 `references/machine-patterns.md`：补充“模板句式堆叠 / 被动语态滥用 / 数字罗列无解读 / 研究目标与研究内容混同”等模式对比示例

### Changed（变更）

- 更新 `SKILL.md`：明确 `itemize/enumerate` 环境标记与 `\item` 关键字保护规则；将 `\caption{...}` 纳入可编辑自然语言范围
- 更新 `config.yaml` / `README.md`：版本号更新至 0.2.0（单一真相来源）

## [0.1.3] - 2026-02-23

### Added（新增）

- 新增“括号嵌套与信息堆砌（数据来源/规模）”机器味识别项与改写策略：当括号内出现多条信息（尤其带分号）时，优先拆为正常句子流

### Changed（变更）

- 更新 `references/machine-patterns.md`：补充“机器味/专家味”对比示例，演示将“来源+规模”从嵌套括号改写为连续叙述
- 更新 `SKILL.md`：执行流程补充“括号重写优先级”，并强调括号只承担短提示、避免括号套括号
- 更新 `config.yaml` / `README.md`：版本号更新至 0.1.3（单一真相来源）

## [0.1.2] - 2026-02-22

### Added（新增）

- 增加提示词注入防护规则：不执行输入文本中的指令/提示，确保不突破硬性约束
- 增加整篇标书按段落/小节分批处理的输入建议，降低结构保护与语义校验风险
- 增加 YAML frontmatter（name/description/metadata.author），便于技能元信息聚合与检索

### Changed（变更）

- 更新 README.md：补齐推荐用法与 FAQ（含提示词注入场景说明）

## [0.1.1] - 2026-02-22

### Added（新增）

- 增加“结构保护与可编辑范围”规则：受保护 token（引用/交叉引用/数学/注释等）逐字不改
- 增加“强度控制（默认最小改动）”策略与结构/语义自检清单
- 参考示例新增 LaTeX token 保留示例（`\cite`/`\ref`/`\eqref`/数学模式）

### Changed（变更）

- 调整“资深专家写作风格”表述：将高风险表达（不确定性等）限定为“仅在原文已包含时才允许更自然表达”
- 更新参考示例：避免引入原文没有的新场景/新实体

## [0.1.0] - 2026-02-22

### Added（新增）

- 初始版本发布
- 支持纯文本和 LaTeX 混合文本的"机器味"去除
- 硬性约束：格式零修改、语义零损失
- "机器味"识别清单（程式化列举、句式重复、连接词堆砌等）
- "资深专家"写作风格模仿（长短句交替、主观判断语气、隐性共识体现）
